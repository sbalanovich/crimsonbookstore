/*********************************************************************** * scripts.js * * Computer Science 50 * Problem Set 7 * * Global JavaScript, if any. **********************************************************************/// Fire jQuery only when document ready$(document).ready( function () {    //if there is a change in the search bar    $("input#booksearch").on('change', function() {       // $('input#booksearch').autocomplete({source:'ajax/suggest_book.php', minLength:2});        var input = $('input#booksearch').val();        var count = 0;        var tableHead = '<div><table id = "results" style="color:#000000; padding:15px;" ><thead></thead>'        if ($('#resultstable').html().trim() === '')         {            $('#resultstable').empty().append(tableHead);        }                if ($.trim(input) != '') {            $.post('ajax/booktbl.php', {booksearch: input}, function(data) {                          var counts = [];                           $("tbody").empty();                $("thead").after(data);                $("#results tbody tr").on('click', function() {                                    var tableid = $(this).attr("id");                    var bookid = tableid.slice(5, tableid.length);                    console.log(bookid);                                      $('#listbook_' + bookid).toggleClass('invisible');                                                      if (counts[bookid]) {                           return;                    }                                      $.post('ajax/listtbl.php', {bookid: bookid}, function(data) {                                                     $('#book_' + bookid).after(data);                            counts[bookid] = true;                                               $("#listings tbody tr td").on('click', function() {                                var listid = $(this).attr("id");                                var id = listid.slice(5, listid.length);                                $("#"+listid + " i").toggleClass("icon-white");                                    $("#boom_"+id +".green").toggleClass("yellow");                                    $("#star_"+id +".green").toggleClass("yellow");                                    $("#cart_"+id +".green").toggleClass("yellow");                                                                    $("#boom_"+id +".pending_red").toggleClass("red");                                    $("#star_"+id +".pending_red").toggleClass("red");                                    $("#cart_"+id +".pending_red").toggleClass("red");                                                                                                    if (listid === 'star_'+id)                                    {                                        if ($("#"+listid + " i").hasClass("icon-white"))                                        {                                            $.post('ajax/star.php', {listid: id, is_starred: 1}, function(data) {                                            });                                        }                                        else                                        {                                             $.post('ajax/star.php', {listid: id, is_starred: 0}, function(data) {                                            });                                        }                                    }                                    else if (listid === 'cart_'+id)                                    {                                        if ($("#"+listid + " i").hasClass("icon-white"))                                        {                                            $.post('ajax/cart.php', {listid: id, is_carted: 1}, function(data) {                                            });                                        }                                        else                                        {                                             $.post('ajax/cart.php', {listid: id, is_carted: 0}, function(data) {                                            });                                        }                                    }                            });                    });                                                                   });            });        }    });});