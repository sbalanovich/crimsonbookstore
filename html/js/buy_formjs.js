/*********************************************************************** * scripts.js * * Computer Science 50 * Problem Set 7 * * Global JavaScript, if any. **********************************************************************/// Fire jQuery only when document ready$(document).ready( function () {    //if there is a change in the search bar    $("input#booksearch").on('change', function() {       // $('input#booksearch').autocomplete({source:'ajax/suggest_book.php', minLength:2});        var input = $('input#booksearch').val();        var count = 0;        var tableHead = '<div><table id = "results" style="color:#000000; padding:15px;" ><thead></thead>'        if ($('#resultstable').html().trim() === '')         {            $('#resultstable').empty().append(tableHead);        }                if ($.trim(input) != '') {            $.post('ajax/booktbl.php', {booksearch: input}, function(data) {                          var counts = [];                           $("tbody").empty();                $("thead").after(data);                $("#results tbody tr").on('click', function() {                                    var tableid = $(this).attr("id");                    var bookid = tableid.slice(5, tableid.length);                    console.log(bookid);                                      $('#listbook_' + bookid).toggleClass('invisible');                                                      if (counts[bookid]) {                           return;                    }                                      $.post('ajax/listtbl.php', {bookid: bookid}, function(data) {                                                     $('#book_' + bookid).after(data);                            counts[bookid] = true;                            $("#listings tbody tr td").on("mouseover", function()                            {                                var listid = $(this).attr("id");                                $("#star_" + listid).tootltip("It's a star!");                                $("#cart_" + listid).tootltip("It's a cart!");                                $("#user_" + listid).tootltip("It's a user!");                            });                                               $("#listings tbody tr td").on('click', function() {                                var listid = $(this).attr("id");                                var id = listid.slice(5, listid.length);                                $("#"+listid + " i").toggleClass("icon-white");                                                                                                    if (listid === 'star_'+id)                                    {                                        if ($("#"+listid + " i").hasClass("icon-white"))                                        {                                            $.post('ajax/star.php', {listid: id, is_starred: 1}, function(data) {                                            });                                            $("td#star_" + id + " h5").replaceWith("<h5><i class=\"icon-star icon-white\"></i> Un-Star?</h5>");                                        }                                        else                                        {                                             $.post('ajax/star.php', {listid: id, is_starred: 0}, function(data) {                                            });                                            $("td#star_" + id + " h5").replaceWith("<h5><i class=\"icon-star\"></i> Star It!</h5></td>");                                        }                                    }                                    else if (listid === 'cart_'+id)                                    {                                         if ($("#"+listid + " i").hasClass("icon-white"))                                        {                                            $.post('ajax/cart.php', {listid: id, is_carted: 1}, function(data) {                                                $("td#user_" + id + " h5").replaceWith("<h5>" + data + "  <i id = LOL class=\"icon-user icon-white\"></h5>");                                            });                                            $("td#cart_" + id + " h5").replaceWith("<h5><i class=\"icon-shopping-cart icon-white\"></i> Remove from Cart?</h5>");                                                                                        $("#boom_"+id +".green").addClass("yellow");                                            $("#star_"+id +".green").addClass("yellow");                                            $("#cart_"+id +".green").addClass("yellow");                                            $("#user_"+id +".green").addClass("yellow");                                            $("#boom_"+id +".pending_red").addClass("red");                                            $("#star_"+id +".pending_red").addClass("red");                                            $("#cart_"+id +".pending_red").addClass("red");                                            $("#user_"+id +".pending_red").addClass("red");                                                                                        $("#boom_"+id +".green").removeClass("green");                                            $("#star_"+id +".green").removeClass("green");                                            $("#cart_"+id +".green").removeClass("green");                                            $("#user_"+id +".green").removeClass("green");                                            $("#boom_"+id +".pending_red").removeClass("pending_red");                                            $("#star_"+id +".pending_red").removeClass("pending_red");                                            $("#cart_"+id +".pending_red").removeClass("pending_red");                                            $("#user_"+id +".pending_red").removeClass("pending_red");                                                                                                                           }                                        else                                        {                                             $.post('ajax/cart.php', {listid: id, is_carted: 0}, function(data) {                                                $("td#user_" + id + " h5").replaceWith("<h5>" + data + "  <i id = LOL class=\"icon-user icon-white\"></h5>");                                                                                          });                                             $("td#cart_" + id + " h5").replaceWith("<h5><i class=\"icon-shopping-cart\"></i> Add to Cart</h5>");                                            $("#boom_"+id +".yellow").toggleClass("green");                                            $("#star_"+id +".yellow").toggleClass("green");                                            $("#cart_"+id +".yellow").toggleClass("green");                                            $("#user_"+id +".yellow").toggleClass("green");                                            $("#boom_"+id +".red").toggleClass("pending_red");                                            $("#star_"+id +".red").toggleClass("pending_red");                                            $("#cart_"+id +".red").toggleClass("pending_red");                                            $("#user_"+id +".red").toggleClass("pending_red");                                                                                        $("#boom_"+id +".yellow").toggleClass("yellow");                                            $("#star_"+id +".yellow").toggleClass("yellow");                                            $("#cart_"+id +".yellow").toggleClass("yellow");                                            $("#user_"+id +".yellow").toggleClass("yellow");                                            $("#boom_"+id +".red").toggleClass("red");                                            $("#star_"+id +".red").toggleClass("red");                                            $("#cart_"+id +".red").toggleClass("red");                                            $("#user_"+id +".red").toggleClass("red");                                        }                                    }                            });                    });                                                                   });            });        }    });});